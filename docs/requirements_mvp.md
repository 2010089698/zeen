# MVP要件定義

## 目的
集中の中断を抑え、平均集中時間を伸ばす

## 成功指標
- 強制中断率（アプリ終了 or 他アプリ起動で離脱）40%以下
- 4週間継続率40%以上
- 「集中できた」と80%以上回答(セッション終了時にワンタップ)

## コアユーザー
習慣でついスマホを触ってしまい、集中が途切れる人

## 主要ユースケース
1. 集中し始める前に、スマホアプリでセッションを開始する
2. セッションを始めると、集中状態であることが自分の端末に表示される
3. 集中の間、スマホ画面にセッション残り時間が表示される
4. アプリから離脱すると、セッションは中断されるが、再開・終了できる
5. セッションが終わると、セッション結果が表示される

### スコープ
- タスク管理やToDoと連携しない
- 生体センサーと連動しない（心拍、集中度推定）
- ゲーミフィケーションしない（レベルアップ、バッジ）

## 画面遷移
起動→セッション開始画面→セッション中画面→(セッション中断画面→)セッション終了画面

## 状態・データ設計
### 状態
- 未開始: アプリを起動したが、まだセッションを開始していない
- セッション中: 集中タイマーが動作している
- 中断中: 他アプリに切り替えた／一時停止した
- 終了済み: セッションが終了し、結果を表示している

### データ
- セッション単位で保存するもの
  - 開始時刻、終了時刻
  - セッション予定時間
  - 実際の経過時間
  - 中断回数
  - ユーザー回答（集中できた: Yes/No）
- 履歴の保存方法
  - 直近10件だけ端末に保持（古いものから消す）
  - 同期はオンライン時にまとめてサーバ送信（匿名IDで紐付け）

## オフライン・同期方針
- セッションの開始から終了までオフラインでも動く
- セッション終了後の簡易アンケートデータは電波接続され次第同期
- 競合時は端末のデータ優先

## 権限・通知設計
- 権限は求めない
- 通知なし

## 非機能要件
- 起動性能: コールドスタート ≤ 3秒（P50）、画面遷移 ≤ 1秒（P50）、セッション開始タップ→カウント表示 ≤ 1秒（P50）
- 電池: 1時間の利用でバッテリー消費5%以内
- オフライン: セッション計測は完全オフライン可。結果はオンライン復帰時に同期
- 対応環境: iOS 16+ / Android 10+

## 計測・判定ルール
- 強制中断率
  - 定義: セッション開始後、ユーザーがアプリを閉じる／別アプリに切り替え → 中断扱い
  - 分子: 中断されたセッション数
  - 分母: 全セッション数
- 継続率
  - 定義: 初回セッションから28日後に、同じ匿名IDで1回以上セッションを実施
  - 計算: 継続ユーザー数 ÷ 初回利用ユーザー数
- 「集中できた」回答率
  - 定義: セッション終了後のアンケートでYesを選んだ割合
  - 分子: Yes回答数
  - 分母: アンケート有効回答総数


## リリース・ロールバック戦略
- 段階的リリース: まず数%のユーザーだけに公開し、問題なければ範囲を広げる
- ロールバック: 致命的な不具合があれば、アプリ自体を公開停止

## セキュリティ・プライバシールール
匿名IDのみ取り扱う

## 技術的前提条件
expo goで起動できる